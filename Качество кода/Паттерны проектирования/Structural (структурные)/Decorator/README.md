# Decorator (–î–µ–∫–∫–æ—Ä–∞—Ç–æ—Ä)

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞—é—â–∞—è —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–ª–∞—Å—Å/—Ñ—É–Ω–∫—Ü–∏—é –∏ —Ä–∞—Å—à–∏—Ä—è—é—â–∞—è—è –∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. (–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç, –∞ —Ä–∞—Å—à–∏—Ä—è–µ—Ç)

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä - —ç—Ç–æ —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫ –æ–±—ä–µ–∫—Ç—É, –Ω–µ –º–µ–Ω—è—è –µ–≥–æ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—É—Ç–µ–º —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞-–æ–±–µ—Ä—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –æ–±—ä–µ–∫—Ç.
–ï—Å–ª–∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å –≤ JS —Å—É—â–µ—Å—Ç–≤—É—é—Ç <a href="https://learn.javascript.ru/call-apply-decorators">—Ñ—É–Ω–∫—Ü–∏–∏-–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã</a> ü§î 

<img src="image.png" width="600" />


## ‚òπÔ∏è –ü—Ä–æ–±–ª–µ–º–∞ 

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —á–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ `slow1(x)`, `slow2(x)`, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. <br>
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ, –∏ –º—ã —Ö–æ—Ç–∏–º –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å (–∑–∞–ø–æ–º–∏–Ω–∞—Ç—å) –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –µ—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —á—Ç–æ–±—ã —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö.

``` javascript
function slow1(x) {
  // –∑–¥–µ—Å—å –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
  alert(`Called with ${x}`);
  return x;
}

function slow2(x) {
  // –∑–¥–µ—Å—å –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
  alert(`Called with ${x}`);
  return x;
}
```

–ù–µ —É–∂–µ–ª–∏ –ø—Ä–∏–π–¥–µ—Ç—Å—è –≤–ª–∞–∑–∏—Ç—å –≤ —ç—Ç–∏ –æ–≥—Ä–æ–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏—é –∏ –º–µ–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª?


## üòÄ –†–µ—à–µ–Ω–∏–µ

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É—Å–ª–æ–∂–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ slow1(x), slow2(x) –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é, –º—ã –º–æ–∂–µ–º –æ–±–µ—Ä–Ω—É—Ç—å –∏—Ö –¥–µ–∫–∫–æ—Ä–∞—Ç–æ—Ä–æ–º –∏ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è.

``` javascript
function cachingDecorator(func) {
  let cache = new Map();

  return function(x) {
    if (cache.has(x)) {    // –µ—Å–ª–∏ –∫–µ—à —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–∫–æ–π x,
      return cache.get(x); // —á–∏—Ç–∞–µ–º –∏–∑ –Ω–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    }

    let result = func(x); // –∏–Ω–∞—á–µ, –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é

    cache.set(x, result); // –∏ –∫–µ—à–∏—Ä—É–µ–º (–∑–∞–ø–æ–º–∏–Ω–∞–µ–º) —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    return result;
  };
}

slow = cachingDecorator(slow);

alert( slow1(1) ); // slow(1) –∫–µ—à–∏—Ä—É–µ–º
alert( "Again: " + slow(1) ); // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ –∫–µ—à–∞

alert( slow1(2) ); // slow(2) –∫–µ—à–∏—Ä—É–µ–º
alert( "Again: " + slow(2) ); // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ –∫–µ—à–∞

alert( slow2(43) ); // slow(43) –∫–µ—à–∏—Ä—É–µ–º
alert( "Again: " + slow(43) ); // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ –∫–µ—à–∞
```
